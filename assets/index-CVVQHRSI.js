(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();document.querySelectorAll('.nav a[href^="#"]').forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();const o=document.querySelector(this.getAttribute("href"));o&&o.scrollIntoView({behavior:"smooth",block:"start"})})});const f=document.querySelectorAll("section[id], header[id]"),h=document.querySelectorAll('.nav-link[href^="#"]');function u(){const t=window.scrollY;let e="";f.forEach(o=>{const n=o.offsetTop-80,r=o.offsetHeight;t>=n&&t<n+r&&(e=o.getAttribute("id")||"")}),h.forEach(o=>{const n=o.getAttribute("href"),r=n==="#"?"":(n||"").slice(1);o.classList.toggle("active",r===e)})}window.addEventListener("scroll",()=>{u(),document.querySelector(".nav").classList.toggle("scrolled",window.scrollY>20)});window.addEventListener("load",u);var d;window.scrollY>20&&((d=document.querySelector(".nav"))==null||d.classList.add("scrolled"));const p=document.querySelectorAll("section, .hero"),v=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&e.target.classList.add("revealed")})},{threshold:.08,rootMargin:"0px 0px -40px 0px"});p.forEach(t=>v.observe(t));const a=document.getElementById("publications-list"),l=document.getElementById("pub-loading");a&&l&&fetch("/publications.json").then(t=>t.ok?t.json():[]).then(t=>{l.hidden=!0,t.length&&(a.hidden=!1,a.innerHTML=t.map((e,o)=>{const n=!!e.image,r=m(e.venue,e.year);return`
          <article class="pub-card" data-index="${o}">
            <div class="pub-card-preview ${n?"has-image":"no-image"}">
              ${n?`<img src="${i(g(e.image))}" alt="" loading="lazy" />`:`<div class="pub-card-placeholder"><span class="pub-card-venue-badge">${i(r)}</span></div>`}
              ${n?`<span class="pub-card-year">${i(e.year)}</span>`:""}
            </div>
            <div class="pub-card-body">
              <h3 class="pub-card-title">${i(e.title)}</h3>
              <p class="pub-card-authors">${i(e.authors)}</p>
              <p class="pub-card-venue">${i(e.venue)}</p>
              <div class="pub-card-links">${b(e)}</div>
            </div>
          </article>`}).join(""))}).catch(()=>{l.textContent="Publications could not be loaded. Run: node scripts/bib-to-json.js"});function i(t){if(!t)return"";const e=document.createElement("div");return e.textContent=t,e.innerHTML}function g(t){if(!t)return"";const e=String(t).trim();return e.startsWith("http://")||e.startsWith("https://")?e:"/publication_preview/"+e.replace(/^\//,"")}function m(t,e){if(!t&&!e)return"Paper";const o=(e||"").trim(),n=(t||"").trim(),r=n.match(/\(([^)]+)\)/);let s="";return r?s=r[1]:n&&!/^\d+$/.test(n)&&(s=n.length>24?n.slice(0,22)+"â€¦":n),[s,o].filter(Boolean).join(" ")}function b(t){const e=[];return t.pdf&&e.push(`<a href="${i(t.pdf)}" target="_blank" rel="noopener">PDF</a>`),t.website&&e.push(`<a href="${i(t.website)}" target="_blank" rel="noopener">Website</a>`),t.code&&e.push(`<a href="${i(t.code)}" target="_blank" rel="noopener">Code</a>`),e.join("")}
